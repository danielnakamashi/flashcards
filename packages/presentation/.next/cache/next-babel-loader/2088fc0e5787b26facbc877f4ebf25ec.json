{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from './firebase';\n\nvar userObserverFromFirebase = function userObserverFromFirebase(callback) {\n  firebase.auth().onAuthStateChanged( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(firebaseUser) {\n      var _firebaseUser$email, _firebaseUser$emailVe, _firebaseUser$display, _firebaseUser$photoUR;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (firebaseUser) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", callback(null));\n\n            case 2:\n              // const token = await firebaseUser.getIdToken(true)\n              callback({\n                email: (_firebaseUser$email = firebaseUser.email) !== null && _firebaseUser$email !== void 0 ? _firebaseUser$email : '',\n                emailVerified: (_firebaseUser$emailVe = firebaseUser.emailVerified) !== null && _firebaseUser$emailVe !== void 0 ? _firebaseUser$emailVe : '',\n                name: (_firebaseUser$display = firebaseUser.displayName) !== null && _firebaseUser$display !== void 0 ? _firebaseUser$display : '',\n                photoUrl: (_firebaseUser$photoUR = firebaseUser.photoURL) !== null && _firebaseUser$photoUR !== void 0 ? _firebaseUser$photoUR : '',\n                uid: firebaseUser.uid // token,\n\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\n\nexport { userObserverFromFirebase };","map":{"version":3,"sources":["/Users/daniel.nakamashi/Documents/projects/clean-flashcards/node_modules/@flashcards/client/src/service/firebase/userObserverFromFirebase.ts"],"names":["firebase","userObserverFromFirebase","callback","auth","onAuthStateChanged","firebaseUser","email","emailVerified","name","displayName","photoUrl","photoURL","uid"],"mappings":";;AACA,OAAOA,QAAP,MAAqB,YAArB;;AAEA,IAAMC,wBAA6C,GAAG,SAAhDA,wBAAgD,CAAAC,QAAQ,EAAI;AAChEF,EAAAA,QAAQ,CAACG,IAAT,GAAgBC,kBAAhB;AAAA,wEAAmC,iBAAMC,YAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kBAC5BA,YAD4B;AAAA;AAAA;AAAA;;AAAA,+CAExBH,QAAQ,CAAC,IAAD,CAFgB;;AAAA;AAKjC;AAEAA,cAAAA,QAAQ,CAAC;AACPI,gBAAAA,KAAK,yBAAED,YAAY,CAACC,KAAf,qEAAwB,EADtB;AAEPC,gBAAAA,aAAa,2BAAEF,YAAY,CAACE,aAAf,yEAAgC,EAFtC;AAGPC,gBAAAA,IAAI,2BAAEH,YAAY,CAACI,WAAf,yEAA8B,EAH3B;AAIPC,gBAAAA,QAAQ,2BAAEL,YAAY,CAACM,QAAf,yEAA2B,EAJ5B;AAKPC,gBAAAA,GAAG,EAAEP,YAAY,CAACO,GALX,CAMP;;AANO,eAAD,CAAR;;AAPiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnC;;AAAA;AAAA;AAAA;AAAA;AAgBD,CAjBD;;AAmBA,SAASX,wBAAT","sourcesContent":["import { UserObserverService } from '../../usecase/UserObserver'\nimport firebase from './firebase'\n\nconst userObserverFromFirebase: UserObserverService = callback => {\n  firebase.auth().onAuthStateChanged(async firebaseUser => {\n    if (!firebaseUser) {\n      return callback(null)\n    }\n\n    // const token = await firebaseUser.getIdToken(true)\n\n    callback({\n      email: firebaseUser.email ?? '',\n      emailVerified: firebaseUser.emailVerified ?? '',\n      name: firebaseUser.displayName ?? '',\n      photoUrl: firebaseUser.photoURL ?? '',\n      uid: firebaseUser.uid,\n      // token,\n    })\n  })\n}\n\nexport { userObserverFromFirebase }\n"]},"metadata":{},"sourceType":"module"}
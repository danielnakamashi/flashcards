{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from 'contexts/auth';\n\nfunction useToken() {\n  _s();\n\n  var _useState = useState(''),\n      token = _useState[0],\n      setToken = _useState[1];\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user,\n      getToken = _useAuth.getToken;\n\n  useEffect(function () {\n    var isMounted = true;\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getToken();\n\n            case 2:\n              token = _context.sent;\n\n              if (token && isMounted) {\n                setToken(token);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n\n    return function () {\n      isMounted = false;\n    };\n  }, [user]);\n  return token;\n}\n\n_s(useToken, \"YjZNGq4HmYTIpY2mCTHCbiBdF4Y=\", false, function () {\n  return [useAuth];\n});\n\nexport { useToken };","map":{"version":3,"sources":["/Users/daniel.nakamashi/Documents/projects/clean-flashcards/packages/presentation/hooks/useToken.ts"],"names":["useEffect","useState","useAuth","useToken","token","setToken","user","getToken","isMounted"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,OAAT,QAAwB,eAAxB;;AAEA,SAASC,QAAT,GAAoB;AAAA;;AAAA,kBACQF,QAAQ,CAAC,EAAD,CADhB;AAAA,MACXG,KADW;AAAA,MACJC,QADI;;AAAA,iBAESH,OAAO,EAFhB;AAAA,MAEVI,IAFU,YAEVA,IAFU;AAAA,MAEJC,QAFI,YAEJA,QAFI;;AAIlBP,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIQ,SAAS,GAAG,IAAhB;;AACC,6DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACoBD,QAAQ,EAD5B;;AAAA;AACMH,cAAAA,KADN;;AAEA,kBAAIA,KAAK,IAAII,SAAb,EAAwB;AACtBH,gBAAAA,QAAQ,CAACD,KAAD,CAAR;AACD;;AAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAOD,WAAO,YAAM;AACXI,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GAZQ,EAYN,CAACF,IAAD,CAZM,CAAT;AAcA,SAAOF,KAAP;AACD;;GAnBQD,Q;UAEoBD,O;;;AAmB7B,SAASC,QAAT","sourcesContent":["import { useEffect, useState } from 'react'\nimport { useAuth } from 'contexts/auth'\n\nfunction useToken() {\n  const [token, setToken] = useState('')\n  const { user, getToken } = useAuth()\n\n  useEffect(() => {\n    let isMounted = true\n    ;(async () => {\n      const token = await getToken()\n      if (token && isMounted) {\n        setToken(token)\n      }\n    })()\n\n    return () => {\n      isMounted = false\n    }\n  }, [user])\n\n  return token\n}\n\nexport { useToken }\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/daniel.nakamashi/Documents/projects/clean-flashcards/packages/presentation/pages/topics/Topics.tsx\";\nimport { useState, useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { useAuth } from '@/contexts/auth';\nimport { Pages } from '@/models';\nimport { Header } from '@/components/Header';\nimport { NewTopicForm } from '@/components/NewTopicForm';\nimport { TopicsList } from '@/components/TopicsList';\nimport { getTopicsObserver, addTopic, removeTopic } from '@/main';\nimport { useStyles } from './Topics.styles';\nimport { withAuth } from '@/hocs/withAuth';\nimport { withRedirectToLogin } from '@/hocs/withRedirectToLogin';\n\nconst Topics = () => {\n  const {\n    user,\n    getToken\n  } = useAuth();\n  const styles = useStyles();\n  const {\n    0: topics,\n    1: setTopics\n  } = useState([]);\n  const {\n    0: token,\n    1: setToken\n  } = useState('');\n  useEffect(() => {\n    let isMounted = true;\n\n    (async () => {\n      const token = await getToken();\n\n      if (token && isMounted) {\n        setToken(token);\n      }\n    })();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [user]);\n  useEffect(() => {\n    let isMounted = true;\n\n    if (token) {\n      const unsubscribe = getTopicsObserver(token).subscribe(topics => {\n        if (isMounted) {\n          setTopics(topics !== null && topics !== void 0 ? topics : []);\n        }\n      });\n      return () => {\n        isMounted = false;\n        unsubscribe();\n      };\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"column\",\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(NewTopicForm, {\n          onTopicSubmitted: async ({\n            name\n          }) => {\n            addTopic(token, {\n              name\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(TopicsList, {\n          items: topics,\n          onItemRemoved: async topicId => {\n            removeTopic(token, topicId);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nTopics.displayName = Pages.Home;\nconst TopicsDecorated = withAuth(withRedirectToLogin(Topics));\nexport { TopicsDecorated as Topics };","map":{"version":3,"sources":["/Users/daniel.nakamashi/Documents/projects/clean-flashcards/packages/presentation/pages/topics/Topics.tsx"],"names":["useState","useEffect","Grid","useAuth","Pages","Header","NewTopicForm","TopicsList","getTopicsObserver","addTopic","removeTopic","useStyles","withAuth","withRedirectToLogin","Topics","user","getToken","styles","topics","setTopics","token","setToken","isMounted","unsubscribe","subscribe","container","name","topicId","displayName","Home","TopicsDecorated"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Grid from '@material-ui/core/Grid'\nimport { Topic } from '@flashcards/core'\nimport { useAuth } from '@/contexts/auth'\nimport { Pages } from '@/models'\nimport { Header } from '@/components/Header'\nimport { NewTopicForm } from '@/components/NewTopicForm'\nimport { TopicsList } from '@/components/TopicsList'\nimport { getTopicsObserver, addTopic, removeTopic } from '@/main'\nimport { useStyles } from './Topics.styles'\nimport { withAuth } from '@/hocs/withAuth'\nimport { withRedirectToLogin } from '@/hocs/withRedirectToLogin'\n\nconst Topics = () => {\n  const { user, getToken } = useAuth()\n  const styles = useStyles()\n  const [topics, setTopics] = useState<Topic[]>([])\n  const [token, setToken] = useState<string>('')\n\n  useEffect(() => {\n    let isMounted = true\n    ;(async () => {\n      const token = await getToken()\n      if (token && isMounted) {\n        setToken(token)\n      }\n    })()\n\n    return () => {\n      isMounted = false\n    }\n  }, [user])\n\n  useEffect(() => {\n    let isMounted = true\n\n    if (token) {\n      const unsubscribe = getTopicsObserver(token).subscribe(topics => {\n        if (isMounted) {\n          setTopics(topics ?? [])\n        }\n      })\n\n      return () => {\n        isMounted = false\n        unsubscribe()\n      }\n    }\n\n    return () => {\n      isMounted = false\n    }\n  }, [token])\n\n  return (\n    <>\n      <Header />\n      <Grid container direction=\"column\" className={styles.container}>\n        <Grid item>\n          <NewTopicForm\n            onTopicSubmitted={async ({ name }) => {\n              addTopic(token, { name })\n            }}\n          />\n        </Grid>\n        <Grid item>\n          <TopicsList\n            items={topics}\n            onItemRemoved={async (topicId: string) => {\n              removeTopic(token, topicId)\n            }}\n          />\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nTopics.displayName = Pages.Home\n\nconst TopicsDecorated = withAuth(withRedirectToLogin(Topics))\n\nexport { TopicsDecorated as Topics }\n"]},"metadata":{},"sourceType":"module"}
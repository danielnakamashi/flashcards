{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { useAuth } from 'contexts/auth';\n\nfunction useToken() {\n  const {\n    0: token,\n    1: setToken\n  } = useState('');\n  const {\n    user,\n    getToken\n  } = useAuth();\n  useEffect(() => {\n    let isMounted = true;\n\n    (async () => {\n      const token = await getToken();\n\n      if (token && isMounted) {\n        setToken(token);\n      }\n    })();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [user]);\n  return token;\n}\n\nexport { useToken };","map":{"version":3,"sources":["/Users/daniel.nakamashi/Documents/projects/clean-flashcards/packages/presentation/hooks/useToken.ts"],"names":["useEffect","useState","useAuth","useToken","token","setToken","user","getToken","isMounted"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,OAAT,QAAwB,eAAxB;;AAEA,SAASC,QAAT,GAAoB;AAClB,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBJ,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAAEK,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBL,OAAO,EAAlC;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,SAAS,GAAG,IAAhB;;AACC,KAAC,YAAY;AACZ,YAAMJ,KAAK,GAAG,MAAMG,QAAQ,EAA5B;;AACA,UAAIH,KAAK,IAAII,SAAb,EAAwB;AACtBH,QAAAA,QAAQ,CAACD,KAAD,CAAR;AACD;AACF,KALA;;AAOD,WAAO,MAAM;AACXI,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GAZQ,EAYN,CAACF,IAAD,CAZM,CAAT;AAcA,SAAOF,KAAP;AACD;;AAED,SAASD,QAAT","sourcesContent":["import { useEffect, useState } from 'react'\nimport { useAuth } from 'contexts/auth'\n\nfunction useToken() {\n  const [token, setToken] = useState('')\n  const { user, getToken } = useAuth()\n\n  useEffect(() => {\n    let isMounted = true\n    ;(async () => {\n      const token = await getToken()\n      if (token && isMounted) {\n        setToken(token)\n      }\n    })()\n\n    return () => {\n      isMounted = false\n    }\n  }, [user])\n\n  return token\n}\n\nexport { useToken }\n"]},"metadata":{},"sourceType":"module"}
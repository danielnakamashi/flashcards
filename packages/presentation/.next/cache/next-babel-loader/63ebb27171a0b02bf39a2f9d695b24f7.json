{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, Topic } from '@flashcards/core';\nimport { Observer } from '../service/Observer';\n\nclass UseCases {\n  constructor(authService, repositoryService) {\n    _defineProperty(this, \"authService\", void 0);\n\n    _defineProperty(this, \"repositoryService\", void 0);\n\n    this.authService = authService;\n    this.repositoryService = repositoryService;\n  }\n\n  async addCard(token, input) {\n    const cardData = await this.repositoryService.addCard(token, input);\n    return new Card(cardData);\n  }\n\n  async addTopic(token, data) {\n    const topicData = await this.repositoryService.addTopic(token, data);\n    return new Topic({\n      id: topicData.id,\n      name: topicData.name,\n      cards: topicData.cards.map(card => new Card(card))\n    });\n  }\n\n  getCurrentUser() {\n    return this.authService.getCurrentUser();\n  }\n\n  async getTopic(token, topicId) {\n    const topicData = await this.repositoryService.getTopic(token, topicId);\n    return new Topic({\n      id: topicData.id,\n      name: topicData.name,\n      cards: topicData.cards.map(card => new Card(card))\n    });\n  }\n\n  async getTopics(token) {\n    const topics = await this.repositoryService.getTopics(token);\n    return topics.map(topicData => new Topic({\n      id: topicData.id,\n      name: topicData.name,\n      cards: topicData.cards.map(card => new Card(card))\n    }));\n  }\n\n  getTopicsObserver(token) {\n    return new Observer(next => {\n      const observer = this.repositoryService.getTopicsObserver(token);\n      observer.subscribe(topicsData => {\n        console.log(topicsData);\n        next(topicsData.map(topicData => new Topic({\n          id: topicData.id,\n          name: topicData.name,\n          cards: topicData.cards.map(card => new Card(card))\n        })));\n      });\n    });\n  }\n\n  getUserToken() {\n    return this.authService.getUserToken();\n  }\n\n  removeTopic(token, topicId) {\n    return this.repositoryService.removeTopic(token, topicId);\n  }\n\n  userObserver(callback) {\n    return this.authService.userObserver(callback);\n  }\n\n}\n\nexport { UseCases };","map":{"version":3,"sources":["/Users/daniel.nakamashi/Documents/projects/clean-flashcards/node_modules/@flashcards/client/src/usecase/index.ts"],"names":["Card","Topic","Observer","UseCases","constructor","authService","repositoryService","addCard","token","input","cardData","addTopic","data","topicData","id","name","cards","map","card","getCurrentUser","getTopic","topicId","getTopics","topics","getTopicsObserver","next","observer","subscribe","topicsData","console","log","getUserToken","removeTopic","userObserver","callback"],"mappings":"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","sourcesContent":["import { Card, Topic, User } from '@flashcards/core'\nimport { AuthService } from '../service/AuthService'\nimport { Observer } from '../service/Observer'\nimport { RepositoryService } from '../service/RepositoryService'\nimport { AddCardInput, AddCardUseCase } from './AddCard'\nimport { AddTopicInput, AddTopicUseCase } from './AddTopic'\nimport { GetCurrentUserUseCase } from './GetCurrentUser'\nimport { GetTopicUseCase } from './GetTopic'\nimport { GetTopicsUseCase } from './GetTopics'\nimport { GetTopicsObserverUseCase } from './GetTopicsObserver'\nimport { GetUserTokenUseCase } from './GetUserToken'\nimport { Observable } from './protocols'\nimport { RemoveTopicUseCase } from './RemoveTopic'\nimport { UserObserverInput, UserObserverUseCase } from './UserObserver'\n\nclass UseCases\n  implements\n    AddCardUseCase,\n    AddTopicUseCase,\n    GetCurrentUserUseCase,\n    GetTopicUseCase,\n    GetTopicsUseCase,\n    GetTopicsObserverUseCase,\n    GetUserTokenUseCase,\n    RemoveTopicUseCase,\n    UserObserverUseCase {\n  private readonly authService: AuthService\n  private readonly repositoryService: RepositoryService\n\n  constructor(authService: AuthService, repositoryService: RepositoryService) {\n    this.authService = authService\n    this.repositoryService = repositoryService\n  }\n\n  async addCard(token: string, input: AddCardInput): Promise<Card> {\n    const cardData = await this.repositoryService.addCard(token, input)\n    return new Card(cardData)\n  }\n\n  async addTopic(token: string, data: AddTopicInput): Promise<Topic> {\n    const topicData = await this.repositoryService.addTopic(token, data)\n    return new Topic({\n      id: topicData.id,\n      name: topicData.name,\n      cards: topicData.cards.map(card => new Card(card)),\n    })\n  }\n\n  getCurrentUser(): Promise<User> {\n    return this.authService.getCurrentUser()\n  }\n\n  async getTopic(token: string, topicId: string): Promise<Topic> {\n    const topicData = await this.repositoryService.getTopic(token, topicId)\n    return new Topic({\n      id: topicData.id,\n      name: topicData.name,\n      cards: topicData.cards.map(card => new Card(card)),\n    })\n  }\n\n  async getTopics(token: string): Promise<Topic[]> {\n    const topics = await this.repositoryService.getTopics(token)\n    return topics.map(\n      topicData =>\n        new Topic({\n          id: topicData.id,\n          name: topicData.name,\n          cards: topicData.cards.map(card => new Card(card)),\n        }),\n    )\n  }\n\n  getTopicsObserver(token: string): Observable<Topic[]> {\n    return new Observer(next => {\n      const observer = this.repositoryService.getTopicsObserver(token)\n      observer.subscribe(topicsData => {\n        console.log(topicsData)\n        next(\n          topicsData.map(\n            topicData =>\n              new Topic({\n                id: topicData.id,\n                name: topicData.name,\n                cards: topicData.cards.map(card => new Card(card)),\n              }),\n          ),\n        )\n      })\n    })\n  }\n\n  getUserToken(): Promise<string> {\n    return this.authService.getUserToken()\n  }\n\n  removeTopic(token: string, topicId: string): Promise<boolean> {\n    return this.repositoryService.removeTopic(token, topicId)\n  }\n\n  userObserver(callback: UserObserverInput): void {\n    return this.authService.userObserver(callback)\n  }\n}\n\nexport { UseCases }\n"]},"metadata":{},"sourceType":"module"}